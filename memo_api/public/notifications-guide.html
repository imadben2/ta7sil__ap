<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Complet des Notifications - MemoBac</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .status-enabled { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .status-disabled { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .status-manual { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .status-partial { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .code-block { background: #1e293b; color: #e2e8f0; border-radius: 8px; padding: 16px; overflow-x: auto; }
        .code-block code { font-family: 'Fira Code', monospace; font-size: 14px; }
        .gradient-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .notification-card { transition: all 0.3s ease; }
        @keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .pulse-dot { animation: pulse-dot 2s infinite; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-header text-white py-8 mb-8">
        <div class="container mx-auto px-6">
            <div class="flex items-center gap-4">
                <div class="bg-white/20 p-4 rounded-2xl">
                    <i class="fas fa-bell text-4xl"></i>
                </div>
                <div>
                    <h1 class="text-4xl font-bold">Guide des Notifications</h1>
                    <p class="text-white/80 text-lg mt-2">Documentation complÃ¨te du systÃ¨me de notifications MemoBac</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 pb-16">
        <!-- Table des matiÃ¨res -->
        <nav class="bg-white rounded-2xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4"><i class="fas fa-list mr-2"></i>Table des MatiÃ¨res</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="#overview" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-eye"></i> Vue d'ensemble
                </a>
                <a href="#types" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-tags"></i> Types de notifications
                </a>
                <a href="#local-notifications" class="flex items-center gap-2 text-teal-600 hover:text-teal-800">
                    <i class="fas fa-mobile-alt"></i> Notifications Locales
                </a>
                <a href="#push-vs-local" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-balance-scale"></i> Push vs Local
                </a>
                <a href="#notification-details" class="flex items-center gap-2 text-orange-600 hover:text-orange-800">
                    <i class="fas fa-info-circle"></i> DÃ©tails des types
                </a>
                <a href="#status" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-toggle-on"></i> Statut actuel
                </a>
                <a href="#configuration" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-cogs"></i> Configuration
                </a>
                <a href="#scheduler" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-clock"></i> TÃ¢ches planifiÃ©es
                </a>
                <a href="#flow" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-project-diagram"></i> Flux de donnÃ©es
                </a>
                <a href="#api" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-code"></i> Endpoints API
                </a>
                <a href="#mobile" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-mobile-alt"></i> App Mobile
                </a>
                <a href="#troubleshooting" class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-wrench"></i> DÃ©pannage
                </a>
            </div>
        </nav>

        <!-- Vue d'ensemble -->
        <section id="overview" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-indigo-100 p-2 rounded-lg"><i class="fas fa-eye text-indigo-600"></i></span>
                Vue d'Ensemble du SystÃ¨me
            </h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-semibold text-lg text-gray-700 mb-3">Architecture</h3>
                    <p class="text-gray-600 mb-4">
                        Le systÃ¨me de notifications utilise <strong>Firebase Cloud Messaging (FCM)</strong> pour envoyer
                        des notifications push aux appareils Android et iOS. L'API Laravel gÃ¨re la crÃ©ation, la planification
                        et l'envoi des notifications.
                    </p>

                    <div class="bg-gray-50 rounded-xl p-4">
                        <h4 class="font-medium text-gray-700 mb-2">Composants principaux :</h4>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-center gap-2">
                                <i class="fas fa-server text-blue-500"></i>
                                <span><strong>API Laravel</strong> - Gestion et envoi</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fab fa-google text-red-500"></i>
                                <span><strong>Firebase FCM</strong> - Delivery push</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fas fa-mobile-alt text-green-500"></i>
                                <span><strong>Flutter App</strong> - RÃ©ception et affichage</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <i class="fas fa-database text-purple-500"></i>
                                <span><strong>MySQL</strong> - Stockage et historique</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-gray-700 mb-3">FonctionnalitÃ©s</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-green-50 rounded-xl p-4 text-center">
                            <i class="fas fa-check-circle text-2xl text-green-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">8 Types de notifications</p>
                        </div>
                        <div class="bg-blue-50 rounded-xl p-4 text-center">
                            <i class="fas fa-clock text-2xl text-blue-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Planification automatique</p>
                        </div>
                        <div class="bg-purple-50 rounded-xl p-4 text-center">
                            <i class="fas fa-user-cog text-2xl text-purple-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">PrÃ©fÃ©rences utilisateur</p>
                        </div>
                        <div class="bg-amber-50 rounded-xl p-4 text-center">
                            <i class="fas fa-moon text-2xl text-amber-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Heures silencieuses</p>
                        </div>
                        <div class="bg-red-50 rounded-xl p-4 text-center">
                            <i class="fas fa-link text-2xl text-red-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Deep linking</p>
                        </div>
                        <div class="bg-cyan-50 rounded-xl p-4 text-center">
                            <i class="fas fa-broadcast-tower text-2xl text-cyan-500 mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Broadcast admin</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Types de notifications -->
        <section id="types" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-green-100 p-2 rounded-lg"><i class="fas fa-tags text-green-600"></i></span>
                Types de Notifications (8 Types)
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
                <!-- Study Reminder -->
                <div class="notification-card bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border-2 border-blue-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ“š</span>
                        <div>
                            <h3 class="font-bold text-gray-800">study_reminder</h3>
                            <p class="text-sm text-gray-500">ØªØ°ÙƒÙŠØ± Ø¯Ø±Ø§Ø³ÙŠ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        Rappel envoyÃ© <strong>15 minutes avant</strong> chaque session d'Ã©tude programmÃ©e.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-blue-500 text-white text-xs rounded-full font-semibold">Normal</span>
                        <span class="status-enabled px-3 py-1 text-white text-xs rounded-full font-semibold">ACTIF</span>
                    </div>
                </div>

                <!-- Exam Alert -->
                <div class="notification-card bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border-2 border-red-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ¯</span>
                        <div>
                            <h3 class="font-bold text-gray-800">exam_alert</h3>
                            <p class="text-sm text-gray-500">ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù…ØªØ­Ø§Ù†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        Alertes envoyÃ©es <strong>7j, 3j, 24h, 2h</strong> avant chaque examen.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-red-500 text-white text-xs rounded-full font-semibold">High</span>
                        <span class="status-enabled px-3 py-1 text-white text-xs rounded-full font-semibold">ACTIF</span>
                    </div>
                </div>

                <!-- Daily Summary -->
                <div class="notification-card bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border-2 border-green-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ“Š</span>
                        <div>
                            <h3 class="font-bold text-gray-800">daily_summary</h3>
                            <p class="text-sm text-gray-500">Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        RÃ©sumÃ© quotidien envoyÃ© Ã  <strong>21h00</strong> avec les statistiques du jour.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-gray-500 text-white text-xs rounded-full font-semibold">Low</span>
                        <span class="status-enabled px-3 py-1 text-white text-xs rounded-full font-semibold">ACTIF</span>
                    </div>
                </div>

                <!-- Weekly Summary -->
                <div class="notification-card bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-2xl p-6 border-2 border-emerald-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ“ˆ</span>
                        <div>
                            <h3 class="font-bold text-gray-800">weekly_summary</h3>
                            <p class="text-sm text-gray-500">Ù…Ù„Ø®Øµ Ø£Ø³Ø¨ÙˆØ¹ÙŠ</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        RÃ©sumÃ© hebdomadaire envoyÃ© le <strong>dimanche Ã  20h</strong>.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-gray-500 text-white text-xs rounded-full font-semibold">Low</span>
                        <span class="status-enabled px-3 py-1 text-white text-xs rounded-full font-semibold">ACTIF</span>
                    </div>
                </div>

                <!-- Course Update -->
                <div class="notification-card bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border-2 border-purple-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ“–</span>
                        <div>
                            <h3 class="font-bold text-gray-800">course_update</h3>
                            <p class="text-sm text-gray-500">ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±Ø©</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        EnvoyÃ© lors de <strong>mises Ã  jour de cours</strong> ou nouvelles leÃ§ons.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-purple-500 text-white text-xs rounded-full font-semibold">Normal</span>
                        <span class="status-manual px-3 py-1 text-white text-xs rounded-full font-semibold">MANUEL</span>
                    </div>
                </div>

                <!-- Achievement -->
                <div class="notification-card bg-gradient-to-br from-amber-50 to-amber-100 rounded-2xl p-6 border-2 border-amber-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ†</span>
                        <div>
                            <h3 class="font-bold text-gray-800">achievement</h3>
                            <p class="text-sm text-gray-500">Ø¥Ù†Ø¬Ø§Ø²</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        CÃ©lÃ©bration des <strong>accomplissements</strong> : streaks, premiers quiz, etc.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-amber-500 text-white text-xs rounded-full font-semibold">Normal</span>
                        <span class="status-manual px-3 py-1 text-white text-xs rounded-full font-semibold">MANUEL</span>
                    </div>
                </div>

                <!-- System -->
                <div class="notification-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 border-2 border-gray-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">âš™ï¸</span>
                        <div>
                            <h3 class="font-bold text-gray-800">system</h3>
                            <p class="text-sm text-gray-500">Ù†Ø¸Ø§Ù…</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        Annonces systÃ¨me envoyÃ©es par <strong>l'administrateur</strong>.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-red-500 text-white text-xs rounded-full font-semibold">High</span>
                        <span class="status-partial px-3 py-1 text-white text-xs rounded-full font-semibold">ADMIN</span>
                    </div>
                </div>

                <!-- Announcement -->
                <div class="notification-card bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-2xl p-6 border-2 border-cyan-200 card-hover">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl">ğŸ“¢</span>
                        <div>
                            <h3 class="font-bold text-gray-800">announcement</h3>
                            <p class="text-sm text-gray-500">Ø¥Ø¹Ù„Ø§Ù†</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">
                        Annonces gÃ©nÃ©rales (dÃ©fini cÃ´tÃ© mobile uniquement).
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="px-3 py-1 bg-cyan-500 text-white text-xs rounded-full font-semibold">Normal</span>
                        <span class="status-disabled px-3 py-1 text-white text-xs rounded-full font-semibold">MOBILE</span>
                    </div>
                </div>
            </div>

            <!-- Achievement Subtypes -->
            <div class="mt-8 bg-amber-50 rounded-xl p-6">
                <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-trophy text-amber-500"></i>
                    Sous-types d'achievements
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                        <span class="text-2xl">ğŸ”¥</span>
                        <p class="font-medium text-gray-700 mt-2">streak_7_days</p>
                        <p class="text-xs text-gray-500">SÃ©rie de 7 jours</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                        <span class="text-2xl">ğŸ¯</span>
                        <p class="font-medium text-gray-700 mt-2">first_quiz</p>
                        <p class="text-xs text-gray-500">Premier quiz</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                        <span class="text-2xl">ğŸ“</span>
                        <p class="font-medium text-gray-700 mt-2">course_completed</p>
                        <p class="text-xs text-gray-500">Cours terminÃ©</p>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                        <span class="text-2xl">ğŸš€</span>
                        <p class="font-medium text-gray-700 mt-2">level_up</p>
                        <p class="text-xs text-gray-500">Niveau supÃ©rieur</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Notifications Locales (Flutter) -->
        <section id="local-notifications" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-teal-100 p-2 rounded-lg"><i class="fas fa-mobile-alt text-teal-600"></i></span>
                Notifications Locales (Flutter)
            </h2>

            <div class="bg-teal-50 border-l-4 border-teal-500 p-4 mb-6">
                <p class="text-teal-700">
                    <strong>Important:</strong> Les rappels de sessions d'Ã©tude (<code>study_reminder</code>) utilisent des <strong>notifications locales</strong>
                    sur l'appareil Flutter, en plus des notifications push FCM. Cela garantit que les rappels fonctionnent mÃªme <strong>sans connexion internet</strong>.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="font-semibold text-lg text-gray-700 mb-3">Comment Ã§a marche ?</h3>
                    <div class="bg-gray-50 rounded-xl p-4 space-y-3">
                        <div class="flex items-start gap-3">
                            <div class="bg-teal-500 text-white p-2 rounded-lg mt-1">
                                <i class="fas fa-calendar-check text-sm"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-700">Planification locale</p>
                                <p class="text-sm text-gray-600">Quand une session est crÃ©Ã©e, une notification est planifiÃ©e <strong>15 minutes avant</strong> directement sur l'appareil.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="bg-teal-500 text-white p-2 rounded-lg mt-1">
                                <i class="fas fa-wifi-slash text-sm"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-700">Fonctionne hors ligne</p>
                                <p class="text-sm text-gray-600">Aucune connexion internet requise. La notification est dÃ©clenchÃ©e par le systÃ¨me Android/iOS.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="bg-teal-500 text-white p-2 rounded-lg mt-1">
                                <i class="fas fa-clock text-sm"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-700">PrÃ©cision exacte</p>
                                <p class="text-sm text-gray-600">Utilise <code>zonedSchedule()</code> pour un timing prÃ©cis Ã  la minute prÃ¨s.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-lg text-gray-700 mb-3">Fichier Flutter</h3>
                    <div class="bg-teal-50 rounded-lg p-4 mb-4">
                        <p class="font-mono text-sm text-teal-800">lib/features/planner/services/session_notification_service.dart</p>
                        <p class="text-sm text-gray-600 mt-2">Service de gestion des notifications de sessions (372 lignes)</p>
                    </div>

                    <h4 class="font-medium text-gray-700 mb-2">CaractÃ©ristiques techniques :</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-teal-500"></i>
                            <span>Maximum <strong>64 notifications</strong> (limite Android)</span>
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-teal-500"></i>
                            <span>Traitement par <strong>lots de 10</strong> pour Ã©viter le blocage UI</span>
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-teal-500"></i>
                            <span>Mappings sessionâ†’notification stockÃ©s dans <strong>Hive</strong></span>
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-teal-500"></i>
                            <span>Support complet du <strong>texte arabe RTL</strong></span>
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-teal-500"></i>
                            <span>Synchronisation automatique avec les sessions actives</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Exemple de notification locale -->
            <div class="bg-gray-50 rounded-xl p-6">
                <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-bell text-teal-500"></i>
                    Exemple de notification locale (Arabic)
                </h3>
                <div class="bg-white rounded-lg p-4 shadow-sm border-r-4 border-teal-500" dir="rtl">
                    <p class="font-bold text-gray-800 text-lg">ØªØ°ÙƒÙŠØ±: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª - Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
                    <p class="text-gray-600 mt-2">Ø§Ù„ÙˆÙ‚Øª: 3:00 Ù…</p>
                    <p class="text-gray-600">Ø§Ù„Ù…Ø¯Ø©: Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©</p>
                    <p class="text-gray-600">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: Ø§Ù„Ø¯ÙˆØ§Ù„ ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª</p>
                </div>
                <div class="mt-4 code-block">
<pre><code class="language-dart">// Payload de la notification locale
{
  'type': 'session_reminder',
  'sessionId': 'sess_123',
  'subjectId': 'math_001',
  'scheduledDate': '2025-12-22T15:00:00',
  'route': '/planner/session/sess_123',
  'action': 'open_session_detail'
}</code></pre>
                </div>
            </div>
        </section>

        <!-- Push vs Local Comparison -->
        <section id="push-vs-local" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-indigo-100 p-2 rounded-lg"><i class="fas fa-balance-scale text-indigo-600"></i></span>
                Push vs Local : Comparaison
            </h2>

            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gradient-to-r from-indigo-500 to-purple-500 text-white">
                            <th class="px-6 py-4 text-left font-semibold rounded-tl-xl">CaractÃ©ristique</th>
                            <th class="px-6 py-4 text-center font-semibold">Push (FCM)</th>
                            <th class="px-6 py-4 text-center font-semibold rounded-tr-xl">Local (Flutter)</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">Connexion internet requise</td>
                            <td class="px-6 py-4 text-center"><span class="text-red-500 font-bold">Oui</span></td>
                            <td class="px-6 py-4 text-center"><span class="text-green-500 font-bold">Non</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">DÃ©clencheur</td>
                            <td class="px-6 py-4 text-center">Serveur API</td>
                            <td class="px-6 py-4 text-center">SystÃ¨me OS</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">PrÃ©cision du timing</td>
                            <td class="px-6 py-4 text-center"><span class="text-amber-500">Variable</span></td>
                            <td class="px-6 py-4 text-center"><span class="text-green-500">Exacte</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">Impact batterie</td>
                            <td class="px-6 py-4 text-center">Faible</td>
                            <td class="px-6 py-4 text-center">TrÃ¨s faible</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">Cas d'utilisation principal</td>
                            <td class="px-6 py-4 text-center">Ã‰vÃ©nements distants, broadcasts</td>
                            <td class="px-6 py-4 text-center">Rappels de sessions</td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-medium text-gray-700">Types de notifications</td>
                            <td class="px-6 py-4 text-center">Tous les 8 types</td>
                            <td class="px-6 py-4 text-center">study_reminder uniquement</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                    <h4 class="font-bold text-blue-700 mb-2"><i class="fas fa-cloud mr-2"></i>Push (FCM)</h4>
                    <p class="text-sm text-gray-600">
                        IdÃ©al pour les notifications en temps rÃ©el depuis le serveur : rÃ©sumÃ©s quotidiens,
                        alertes d'examen, mises Ã  jour de cours, achievements, et broadcasts admin.
                    </p>
                </div>
                <div class="bg-teal-50 border border-teal-200 rounded-xl p-4">
                    <h4 class="font-bold text-teal-700 mb-2"><i class="fas fa-mobile-alt mr-2"></i>Local (Flutter)</h4>
                    <p class="text-sm text-gray-600">
                        Parfait pour les rappels de sessions d'Ã©tude qui doivent Ãªtre fiables mÃªme sans
                        connexion internet, avec un timing prÃ©cis.
                    </p>
                </div>
            </div>
        </section>

        <!-- DÃ©tails des Types de Notifications -->
        <section id="notification-details" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-orange-100 p-2 rounded-lg"><i class="fas fa-info-circle text-orange-600"></i></span>
                DÃ©tails de Chaque Type de Notification
            </h2>

            <!-- study_reminder Details -->
            <div class="mb-6 border border-blue-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ“š</span>
                            <div>
                                <h3 class="font-bold text-xl">study_reminder</h3>
                                <p class="text-blue-100">ØªØ°ÙƒÙŠØ± Ø¯Ø±Ø§Ø³ÙŠ - Rappel de session d'Ã©tude</p>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <span class="bg-teal-400 px-3 py-1 rounded-full text-sm font-semibold">LOCAL</span>
                            <span class="bg-blue-300 px-3 py-1 rounded-full text-sm font-semibold">PUSH</span>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-blue-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">15 minutes avant chaque session d'Ã©tude programmÃ©e</p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-link text-blue-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://planner/session/{sessionId}</code>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-database text-blue-500 mr-2"></i>DonnÃ©es incluses</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ Nom de la matiÃ¨re (subjectName)</li>
                                <li>â€¢ Type de session (study, review, exercise)</li>
                                <li>â€¢ DurÃ©e prÃ©vue (duration)</li>
                                <li>â€¢ Titre du contenu (contentTitle)</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-blue-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-blue-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">ØªØ°ÙƒÙŠØ±: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª - Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
                                <p class="text-gray-600 text-sm mt-1">Ø§Ù„ÙˆÙ‚Øª: 3:00 Ù…</p>
                                <p class="text-gray-600 text-sm">Ø§Ù„Ù…Ø¯Ø©: Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©</p>
                                <p class="text-gray-600 text-sm">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: Ø§Ù„Ø¯ÙˆØ§Ù„</p>
                            </div>
                            <p class="text-sm text-gray-500 mt-2 italic">
                                <i class="fas fa-info-circle mr-1"></i>
                                Seul type utilisant Ã  la fois notifications locales ET push
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- exam_alert Details -->
            <div class="mb-6 border border-red-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ¯</span>
                            <div>
                                <h3 class="font-bold text-xl">exam_alert</h3>
                                <p class="text-red-100">ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù…ØªØ­Ø§Ù† - Alerte d'examen</p>
                            </div>
                        </div>
                        <span class="bg-red-300 px-3 py-1 rounded-full text-sm font-semibold">HIGH PRIORITY</span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-red-500 mr-2"></i>DÃ©clencheurs multiples</h4>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm">7 jours avant</span>
                                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm">3 jours avant</span>
                                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm">24 heures avant</span>
                                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm">2 heures avant</span>
                            </div>

                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-link text-red-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://planner/exam/{examId}</code>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-red-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-red-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</p>
                                <p class="text-gray-600 text-sm mt-1">Ù…ØªØ¨Ù‚ÙŠ: 3 Ø£ÙŠØ§Ù…</p>
                                <p class="text-gray-600 text-sm">Ø§Ù„ØªØ§Ø±ÙŠØ®: 25 Ø¯ÙŠØ³Ù…Ø¨Ø± 2025</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- daily_summary Details -->
            <div class="mb-6 border border-green-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-4">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl">ğŸ“Š</span>
                        <div>
                            <h3 class="font-bold text-xl">daily_summary</h3>
                            <p class="text-green-100">Ù…Ù„Ø®Øµ ÙŠÙˆÙ…ÙŠ - RÃ©sumÃ© quotidien</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-green-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">Tous les jours Ã  <strong>21:00</strong></p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-link text-green-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://profile/statistics</code>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-database text-green-500 mr-2"></i>DonnÃ©es incluses</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ Nombre de sessions complÃ©tÃ©es</li>
                                <li>â€¢ Temps total d'Ã©tude</li>
                                <li>â€¢ MatiÃ¨res Ã©tudiÃ©es</li>
                                <li>â€¢ Points gagnÃ©s</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-green-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-green-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">Ù…Ù„Ø®Øµ ÙŠÙˆÙ…Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</p>
                                <p class="text-gray-600 text-sm mt-1">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: 4</p>
                                <p class="text-gray-600 text-sm">ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©: 3 Ø³Ø§Ø¹Ø§Øª</p>
                                <p class="text-gray-600 text-sm">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©: +120</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- weekly_summary Details -->
            <div class="mb-6 border border-emerald-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-4">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl">ğŸ“ˆ</span>
                        <div>
                            <h3 class="font-bold text-xl">weekly_summary</h3>
                            <p class="text-emerald-100">Ù…Ù„Ø®Øµ Ø£Ø³Ø¨ÙˆØ¹ÙŠ - RÃ©sumÃ© hebdomadaire</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-emerald-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">Chaque <strong>dimanche Ã  20:00</strong></p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-link text-emerald-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://profile/statistics</code>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-database text-emerald-500 mr-2"></i>DonnÃ©es incluses</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ Statistiques de la semaine</li>
                                <li>â€¢ Streak actuel</li>
                                <li>â€¢ Comparaison avec semaine prÃ©cÃ©dente</li>
                                <li>â€¢ Classement hebdomadaire</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-emerald-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-emerald-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹Ùƒ</p>
                                <p class="text-gray-600 text-sm mt-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©: 18 Ø³Ø§Ø¹Ø©</p>
                                <p class="text-gray-600 text-sm">Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø£ÙŠØ§Ù…: 7 Ø£ÙŠØ§Ù… ğŸ”¥</p>
                                <p class="text-gray-600 text-sm">Ø§Ù„ØªØ­Ø³Ù†: +25% Ø¹Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- course_update Details -->
            <div class="mb-6 border border-purple-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-4">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl">ğŸ“–</span>
                        <div>
                            <h3 class="font-bold text-xl">course_update</h3>
                            <p class="text-purple-100">ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±Ø© - Mise Ã  jour de cours</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-purple-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">Manuel par l'administrateur lors de mises Ã  jour</p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-link text-purple-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://courses/{courseId}</code>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-tags text-purple-500 mr-2"></i>Sous-types</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-sm">new_lesson</span>
                                <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-sm">content_updated</span>
                                <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-sm">instructor_message</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-purple-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-purple-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø©</p>
                                <p class="text-gray-600 text-sm mt-1">Ø¯ÙˆØ±Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
                                <p class="text-gray-600 text-sm">ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯: Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- achievement Details -->
            <div class="mb-6 border border-amber-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-amber-500 to-amber-600 text-white px-6 py-4">
                    <div class="flex items-center gap-3">
                        <span class="text-3xl">ğŸ†</span>
                        <div>
                            <h3 class="font-bold text-xl">achievement</h3>
                            <p class="text-amber-100">Ø¥Ù†Ø¬Ø§Ø² - Accomplissement</p>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-amber-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">Ã‰vÃ©nementiel - dÃ©clenchÃ© quand un objectif est atteint</p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-link text-amber-500 mr-2"></i>Deep Link</h4>
                            <code class="bg-gray-100 px-2 py-1 rounded text-sm">memobac://profile/achievements</code>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-tags text-amber-500 mr-2"></i>Sous-types</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-sm">ğŸ”¥ streak_7_days</span>
                                <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-sm">ğŸ¯ first_quiz</span>
                                <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-sm">ğŸ“ course_completed</span>
                                <span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-sm">ğŸš€ level_up</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-amber-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-amber-50 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯</p>
                                <p class="text-gray-600 text-sm mt-1">Ø­Ù‚Ù‚Øª Ø³Ù„Ø³Ù„Ø© 7 Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©!</p>
                                <p class="text-gray-600 text-sm">+50 Ù†Ù‚Ø·Ø© Ø¥Ø¶Ø§ÙÙŠØ©</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- system Details -->
            <div class="mb-6 border border-gray-300 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-gray-600 to-gray-700 text-white px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">âš™ï¸</span>
                            <div>
                                <h3 class="font-bold text-xl">system</h3>
                                <p class="text-gray-300">Ù†Ø¸Ø§Ù… - Notification systÃ¨me</p>
                            </div>
                        </div>
                        <span class="bg-red-400 px-3 py-1 rounded-full text-sm font-semibold">HIGH PRIORITY</span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-clock text-gray-500 mr-2"></i>DÃ©clencheur</h4>
                            <p class="text-gray-600">Manuel par l'administrateur (broadcast)</p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-users text-gray-500 mr-2"></i>Audience</h4>
                            <p class="text-gray-600">Tous les utilisateurs ou groupe ciblÃ©</p>

                            <h4 class="font-semibold text-gray-700 mb-2 mt-4"><i class="fas fa-cog text-gray-500 mr-2"></i>CaractÃ©ristiques</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>â€¢ PrioritÃ© haute (affichage immÃ©diat)</li>
                                <li>â€¢ Titre et corps personnalisables</li>
                                <li>â€¢ Peut inclure un deep link optionnel</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2"><i class="fas fa-bell text-gray-500 mr-2"></i>Exemple de contenu</h4>
                            <div class="bg-gray-100 rounded-lg p-4" dir="rtl">
                                <p class="font-bold text-gray-800">Ø¥Ø¹Ù„Ø§Ù† Ù‡Ø§Ù… Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
                                <p class="text-gray-600 text-sm mt-1">Ø³ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ ØµÙŠØ§Ù†Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</p>
                                <p class="text-gray-600 text-sm">Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© 2:00 Ø¥Ù„Ù‰ 4:00 ØµØ¨Ø§Ø­Ø§Ù‹</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- announcement Details -->
            <div class="border border-cyan-200 rounded-xl overflow-hidden">
                <div class="bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-3xl">ğŸ“¢</span>
                            <div>
                                <h3 class="font-bold text-xl">announcement</h3>
                                <p class="text-cyan-100">Ø¥Ø¹Ù„Ø§Ù† - Annonce gÃ©nÃ©rale</p>
                            </div>
                        </div>
                        <span class="bg-gray-400 px-3 py-1 rounded-full text-sm font-semibold">MOBILE ONLY</span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="bg-cyan-50 border-l-4 border-cyan-500 p-4">
                        <p class="text-cyan-700">
                            <strong><i class="fas fa-info-circle mr-2"></i>Note:</strong>
                            Ce type est dÃ©fini dans l'enum Flutter mais <strong>n'est pas encore implÃ©mentÃ©</strong> cÃ´tÃ© API.
                            Il est rÃ©servÃ© pour une utilisation future pour les annonces gÃ©nÃ©rales.
                        </p>
                    </div>
                    <div class="mt-4">
                        <h4 class="font-semibold text-gray-700 mb-2">Utilisation prÃ©vue :</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>â€¢ Annonces gÃ©nÃ©rales de l'application</li>
                            <li>â€¢ Nouvelles fonctionnalitÃ©s</li>
                            <li>â€¢ Promotions et Ã©vÃ©nements</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Statut actuel -->
        <section id="status" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-blue-100 p-2 rounded-lg"><i class="fas fa-toggle-on text-blue-600"></i></span>
                Statut Actuel des Notifications
            </h2>

            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="px-4 py-3 text-left font-semibold text-gray-700">Type</th>
                            <th class="px-4 py-3 text-left font-semibold text-gray-700">Code API</th>
                            <th class="px-4 py-3 text-left font-semibold text-gray-700">Code Mobile</th>
                            <th class="px-4 py-3 text-left font-semibold text-gray-700">Job PlanifiÃ©</th>
                            <th class="px-4 py-3 text-left font-semibold text-gray-700">Statut</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ“š study_reminder</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendSessionReminder()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… SendSessionRemindersJob (15 min)</span></td>
                            <td class="px-4 py-4"><span class="status-enabled px-3 py-1 text-white text-sm rounded-full font-semibold">ACTIF</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ¯ exam_alert</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… scheduleExamAlerts()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… SendExamAlertsJob (hourly)</span></td>
                            <td class="px-4 py-4"><span class="status-enabled px-3 py-1 text-white text-sm rounded-full font-semibold">ACTIF</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ“Š daily_summary</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendDailySummary()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… SendDailySummaryJob (21:00)</span></td>
                            <td class="px-4 py-4"><span class="status-enabled px-3 py-1 text-white text-sm rounded-full font-semibold">ACTIF</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ“ˆ weekly_summary</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendWeeklySummary()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… SendWeeklySummaryJob (Dim 20:00)</span></td>
                            <td class="px-4 py-4"><span class="status-enabled px-3 py-1 text-white text-sm rounded-full font-semibold">ACTIF</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ“– course_update</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendCourseUpdateNotification()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-amber-600">âš¡ DÃ©clenchÃ© manuellement</span></td>
                            <td class="px-4 py-4"><span class="status-manual px-3 py-1 text-white text-sm rounded-full font-semibold">MANUEL</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ† achievement</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendAchievementNotification()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-amber-600">âš¡ DÃ©clenchÃ© par Ã©vÃ©nements</span></td>
                            <td class="px-4 py-4"><span class="status-manual px-3 py-1 text-white text-sm rounded-full font-semibold">MANUEL</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">âš™ï¸ system</td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… sendSystemNotification()</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Handled</span></td>
                            <td class="px-4 py-4"><span class="text-purple-600">ğŸ‘¤ Broadcast Admin</span></td>
                            <td class="px-4 py-4"><span class="status-partial px-3 py-1 text-white text-sm rounded-full font-semibold">ADMIN</span></td>
                        </tr>
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-4 font-medium">ğŸ“¢ announcement</td>
                            <td class="px-4 py-4"><span class="text-red-600">âŒ Non implÃ©mentÃ©</span></td>
                            <td class="px-4 py-4"><span class="text-green-600">âœ… Dans enum</span></td>
                            <td class="px-4 py-4"><span class="text-gray-400">â€”</span></td>
                            <td class="px-4 py-4"><span class="status-disabled px-3 py-1 text-white text-sm rounded-full font-semibold">MOBILE ONLY</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Configuration -->
        <section id="configuration" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-amber-100 p-2 rounded-lg"><i class="fas fa-cogs text-amber-600"></i></span>
                Configuration du SystÃ¨me
            </h2>

            <!-- Firebase Configuration -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 flex items-center gap-2">
                    <i class="fab fa-google text-red-500"></i>
                    Configuration Firebase FCM
                </h3>

                <div class="bg-gray-50 rounded-xl p-6 mb-4">
                    <h4 class="font-medium text-gray-700 mb-3">1. Fichier de credentials</h4>
                    <div class="code-block mb-4">
                        <code>storage/app/firebase-credentials.json</code>
                    </div>
                    <p class="text-gray-600 text-sm">
                        TÃ©lÃ©chargez ce fichier depuis Firebase Console â†’ Project Settings â†’ Service Accounts â†’ Generate New Private Key
                    </p>
                </div>

                <div class="bg-gray-50 rounded-xl p-6 mb-4">
                    <h4 class="font-medium text-gray-700 mb-3">2. Variables d'environnement (.env)</h4>
                    <div class="code-block">
<pre><code># Firebase Project ID
FIREBASE_PROJECT_ID=your-project-id

# FCM Settings
FCM_DEFAULT_ICON=ic_notification
FCM_DEFAULT_COLOR=#4CAF50
FCM_DEFAULT_SOUND=default
FCM_ANDROID_CHANNEL_ID=memo_bac_notifications

# Rate Limiting
NOTIFICATION_RATE_LIMIT_ENABLED=true
NOTIFICATION_MAX_PER_DAY=10
NOTIFICATION_MAX_PER_HOUR=5

# Deep Linking
DEEP_LINK_SCHEME=memobac</code></pre>
                    </div>
                </div>

                <div class="bg-gray-50 rounded-xl p-6">
                    <h4 class="font-medium text-gray-700 mb-3">3. Fichier de configuration</h4>
                    <p class="text-gray-600 mb-2">Chemin: <code class="bg-gray-200 px-2 py-1 rounded">config/firebase.php</code></p>
                    <div class="code-block">
<pre><code class="language-php">&lt;?php
return [
    'credentials' =&gt; [
        'file' =&gt; storage_path('app/firebase-credentials.json'),
    ],
    'project_id' =&gt; env('FIREBASE_PROJECT_ID'),
    'fcm' =&gt; [
        'default_icon' =&gt; env('FCM_DEFAULT_ICON', 'ic_notification'),
        'default_color' =&gt; env('FCM_DEFAULT_COLOR', '#4CAF50'),
        'android_channel_id' =&gt; env('FCM_ANDROID_CHANNEL_ID', 'memo_bac_notifications'),
    ],
];</code></pre>
                    </div>
                </div>
            </div>

            <!-- User Preferences -->
            <div>
                <h3 class="text-xl font-semibold text-gray-700 mb-4 flex items-center gap-2">
                    <i class="fas fa-user-cog text-purple-500"></i>
                    PrÃ©fÃ©rences Utilisateur
                </h3>

                <p class="text-gray-600 mb-4">
                    Chaque utilisateur peut configurer ses prÃ©fÃ©rences dans la table <code class="bg-gray-200 px-2 py-1 rounded">user_notification_settings</code>
                </p>

                <div class="overflow-x-auto">
                    <table class="w-full bg-gray-50 rounded-xl overflow-hidden">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-3 text-left">ParamÃ¨tre</th>
                                <th class="px-4 py-3 text-left">Type</th>
                                <th class="px-4 py-3 text-left">DÃ©faut</th>
                                <th class="px-4 py-3 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">notifications_enabled</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">Interrupteur principal</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">study_reminders</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">Rappels de sessions</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">exam_reminders</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">Alertes d'examens</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">daily_summary</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">RÃ©sumÃ© quotidien</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">weekly_summary</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-red-600">false</span></td>
                                <td class="px-4 py-3">RÃ©sumÃ© hebdomadaire</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">motivational_quotes</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">Notifications achievements</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">course_updates</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-green-600">true</span></td>
                                <td class="px-4 py-3">Mises Ã  jour de cours</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">quiet_hours_enabled</td>
                                <td class="px-4 py-3">bool</td>
                                <td class="px-4 py-3"><span class="text-red-600">false</span></td>
                                <td class="px-4 py-3">Activer heures silencieuses</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">quiet_start_time</td>
                                <td class="px-4 py-3">time</td>
                                <td class="px-4 py-3">null</td>
                                <td class="px-4 py-3">DÃ©but (ex: 22:00)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 font-mono text-sm">quiet_end_time</td>
                                <td class="px-4 py-3">time</td>
                                <td class="px-4 py-3">null</td>
                                <td class="px-4 py-3">Fin (ex: 07:00)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Scheduler / TÃ¢ches planifiÃ©es -->
        <section id="scheduler" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-cyan-100 p-2 rounded-lg"><i class="fas fa-clock text-cyan-600"></i></span>
                TÃ¢ches PlanifiÃ©es (Scheduler)
            </h2>

            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                <p class="text-blue-700">
                    <strong>Important:</strong> Pour que les tÃ¢ches planifiÃ©es fonctionnent, le scheduler Laravel doit Ãªtre actif.
                    Ajoutez cette entrÃ©e cron sur votre serveur :
                </p>
                <div class="code-block mt-3">
                    <code>* * * * * cd /path-to-project && php artisan schedule:run >> /dev/null 2>&1</code>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Session Reminders -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-blue-500 text-white p-3 rounded-xl">
                            <i class="fas fa-clock text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">SendSessionRemindersJob</h3>
                            <p class="text-sm text-gray-500">Rappels de sessions d'Ã©tude</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Toutes les 15 minutes</p>
                        <p><strong>Action:</strong> Envoie un rappel 15 min avant chaque session</p>
                        <p><strong>Fichier:</strong> <code class="bg-white px-2 py-1 rounded">app/Jobs/Planner/SendSessionRemindersJob.php</code></p>
                    </div>
                </div>

                <!-- Exam Alerts -->
                <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 border border-red-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-red-500 text-white p-3 rounded-xl">
                            <i class="fas fa-bell text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">SendExamAlertsJob</h3>
                            <p class="text-sm text-gray-500">Alertes d'examens</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Toutes les heures</p>
                        <p><strong>Action:</strong> Planifie alertes Ã  7j, 3j, 24h, 2h avant</p>
                        <p><strong>Fichier:</strong> <code class="bg-white px-2 py-1 rounded">app/Jobs/SendExamAlertsJob.php</code></p>
                    </div>
                </div>

                <!-- Daily Summary -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-green-500 text-white p-3 rounded-xl">
                            <i class="fas fa-chart-pie text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">SendDailySummaryJob</h3>
                            <p class="text-sm text-gray-500">RÃ©sumÃ© quotidien</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Tous les jours Ã  21h00</p>
                        <p><strong>Action:</strong> Envoie le rÃ©sumÃ© des sessions du jour</p>
                        <p><strong>Fichier:</strong> <code class="bg-white px-2 py-1 rounded">app/Jobs/SendDailySummaryJob.php</code></p>
                    </div>
                </div>

                <!-- Weekly Summary -->
                <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl p-6 border border-emerald-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-emerald-500 text-white p-3 rounded-xl">
                            <i class="fas fa-calendar-week text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">SendWeeklySummaryJob</h3>
                            <p class="text-sm text-gray-500">RÃ©sumÃ© hebdomadaire</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Dimanche Ã  20h00</p>
                        <p><strong>Action:</strong> Envoie le rÃ©sumÃ© de la semaine</p>
                        <p><strong>Fichier:</strong> <code class="bg-white px-2 py-1 rounded">app/Jobs/SendWeeklySummaryJob.php</code></p>
                    </div>
                </div>

                <!-- Process Due Notifications -->
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-purple-500 text-white p-3 rounded-xl">
                            <i class="fas fa-paper-plane text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">notifications:process</h3>
                            <p class="text-sm text-gray-500">Traitement des notifications en attente</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Toutes les minutes</p>
                        <p><strong>Action:</strong> Envoie les notifications dont scheduled_for &le; now()</p>
                        <p><strong>Commande:</strong> <code class="bg-white px-2 py-1 rounded">php artisan notifications:process</code></p>
                    </div>
                </div>

                <!-- Missed Sessions -->
                <div class="bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-6 border border-amber-200">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-amber-500 text-white p-3 rounded-xl">
                            <i class="fas fa-exclamation-triangle text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">CheckMissedSessionsJob</h3>
                            <p class="text-sm text-gray-500">Sessions manquÃ©es</p>
                        </div>
                    </div>
                    <div class="space-y-2 text-sm">
                        <p><strong>FrÃ©quence:</strong> Toutes les heures</p>
                        <p><strong>Action:</strong> Marque les sessions non dÃ©marrÃ©es comme "missed"</p>
                        <p><strong>Fichier:</strong> <code class="bg-white px-2 py-1 rounded">app/Jobs/Planner/CheckMissedSessionsJob.php</code></p>
                    </div>
                </div>
            </div>

            <!-- Kernel.php code -->
            <div class="mt-8">
                <h3 class="font-semibold text-gray-700 mb-4">Configuration dans Kernel.php</h3>
                <div class="code-block">
<pre><code class="language-php">// app/Console/Kernel.php

protected function schedule(Schedule $schedule)
{
    // Session reminders - every 15 minutes
    $schedule->job(new SendSessionRemindersJob())
        ->everyFifteenMinutes()
        ->name('planner.send-reminders');

    // Process scheduled notifications - every minute
    $schedule->command('notifications:process --batch-size=100')
        ->everyMinute()
        ->name('notifications.process-scheduled');

    // Daily summary - every day at 21:00
    $schedule->job(new SendDailySummaryJob())
        ->daily()
        ->at('21:00')
        ->name('notifications.daily-summary');

    // Weekly summary - Sundays at 20:00
    $schedule->job(new SendWeeklySummaryJob())
        ->weekly()
        ->sundays()
        ->at('20:00')
        ->name('notifications.weekly-summary');

    // Exam alerts - hourly
    $schedule->job(new SendExamAlertsJob())
        ->hourly()
        ->name('notifications.exam-alerts');
}</code></pre>
                </div>
            </div>
        </section>

        <!-- Flux de donnÃ©es -->
        <section id="flow" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-purple-100 p-2 rounded-lg"><i class="fas fa-project-diagram text-purple-600"></i></span>
                Flux de DonnÃ©es
            </h2>

            <!-- Push Notification Flow -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Flux de Notification Push</h3>
                <div class="bg-gray-50 rounded-xl p-6">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                        <div class="text-center">
                            <div class="bg-blue-500 text-white p-4 rounded-xl mb-2">
                                <i class="fas fa-server text-2xl"></i>
                            </div>
                            <p class="font-medium">API Laravel</p>
                            <p class="text-xs text-gray-500">NotificationService</p>
                        </div>
                        <i class="fas fa-arrow-right text-2xl text-gray-400 hidden md:block"></i>
                        <i class="fas fa-arrow-down text-2xl text-gray-400 md:hidden"></i>
                        <div class="text-center">
                            <div class="bg-red-500 text-white p-4 rounded-xl mb-2">
                                <i class="fab fa-google text-2xl"></i>
                            </div>
                            <p class="font-medium">Firebase FCM</p>
                            <p class="text-xs text-gray-500">Push Delivery</p>
                        </div>
                        <i class="fas fa-arrow-right text-2xl text-gray-400 hidden md:block"></i>
                        <i class="fas fa-arrow-down text-2xl text-gray-400 md:hidden"></i>
                        <div class="text-center">
                            <div class="bg-green-500 text-white p-4 rounded-xl mb-2">
                                <i class="fas fa-mobile-alt text-2xl"></i>
                            </div>
                            <p class="font-medium">App Flutter</p>
                            <p class="text-xs text-gray-500">NotificationService</p>
                        </div>
                        <i class="fas fa-arrow-right text-2xl text-gray-400 hidden md:block"></i>
                        <i class="fas fa-arrow-down text-2xl text-gray-400 md:hidden"></i>
                        <div class="text-center">
                            <div class="bg-purple-500 text-white p-4 rounded-xl mb-2">
                                <i class="fas fa-user text-2xl"></i>
                            </div>
                            <p class="font-medium">Utilisateur</p>
                            <p class="text-xs text-gray-500">Notification UI</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Handling States -->
            <div>
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Ã‰tats de rÃ©ception (App Flutter)</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-green-50 border border-green-200 rounded-xl p-4">
                        <h4 class="font-bold text-green-700 mb-2">
                            <i class="fas fa-eye mr-2"></i>Foreground
                        </h4>
                        <p class="text-sm text-gray-600">
                            L'app est ouverte et active. Le message FCM est reÃ§u et une notification locale est affichÃ©e.
                        </p>
                        <code class="block mt-2 text-xs bg-white p-2 rounded">showLocalNotification()</code>
                    </div>
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                        <h4 class="font-bold text-blue-700 mb-2">
                            <i class="fas fa-moon mr-2"></i>Background
                        </h4>
                        <p class="text-sm text-gray-600">
                            L'app est en arriÃ¨re-plan. Le handler background traite le message.
                        </p>
                        <code class="block mt-2 text-xs bg-white p-2 rounded">_firebaseMessagingBackgroundHandler()</code>
                    </div>
                    <div class="bg-purple-50 border border-purple-200 rounded-xl p-4">
                        <h4 class="font-bold text-purple-700 mb-2">
                            <i class="fas fa-power-off mr-2"></i>Terminated
                        </h4>
                        <p class="text-sm text-gray-600">
                            L'app est fermÃ©e. Le message est stockÃ© et rÃ©cupÃ©rÃ© au dÃ©marrage.
                        </p>
                        <code class="block mt-2 text-xs bg-white p-2 rounded">getInitialMessage()</code>
                    </div>
                </div>
            </div>
        </section>

        <!-- API Endpoints -->
        <section id="api" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-red-100 p-2 rounded-lg"><i class="fas fa-code text-red-600"></i></span>
                Endpoints API
            </h2>

            <!-- User Endpoints -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Endpoints Utilisateur</h3>
                <p class="text-gray-600 mb-4">Base URL: <code class="bg-gray-100 px-2 py-1 rounded">/api/v1/notifications</code></p>

                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-3 text-left">MÃ©thode</th>
                                <th class="px-4 py-3 text-left">Endpoint</th>
                                <th class="px-4 py-3 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications</td>
                                <td class="px-4 py-3">Liste paginÃ©e des notifications</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/unread-count</td>
                                <td class="px-4 py-3">Nombre de notifications non lues</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/{id}/read</td>
                                <td class="px-4 py-3">Marquer comme lue</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/read-all</td>
                                <td class="px-4 py-3">Marquer toutes comme lues</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-mono">DELETE</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/{id}</td>
                                <td class="px-4 py-3">Supprimer une notification</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/settings</td>
                                <td class="px-4 py-3">Obtenir les prÃ©fÃ©rences</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-amber-100 text-amber-800 px-2 py-1 rounded text-sm font-mono">PUT</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/settings</td>
                                <td class="px-4 py-3">Mettre Ã  jour les prÃ©fÃ©rences</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/register-device</td>
                                <td class="px-4 py-3">Enregistrer token FCM</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-mono">DELETE</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/unregister-device</td>
                                <td class="px-4 py-3">DÃ©senregistrer appareil</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Admin Endpoints -->
            <div>
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Endpoints Admin</h3>
                <p class="text-gray-600 mb-4">Base URL: <code class="bg-gray-100 px-2 py-1 rounded">/admin/notifications</code></p>

                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-3 text-left">MÃ©thode</th>
                                <th class="px-4 py-3 text-left">Endpoint</th>
                                <th class="px-4 py-3 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications</td>
                                <td class="px-4 py-3">Dashboard admin</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/statistics</td>
                                <td class="px-4 py-3">Statistiques systÃ¨me</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/test</td>
                                <td class="px-4 py-3">Envoyer notification test</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-mono">GET</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/broadcast</td>
                                <td class="px-4 py-3">Page de broadcast</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/broadcast/send</td>
                                <td class="px-4 py-3">Envoyer broadcast</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-mono">POST</span></td>
                                <td class="px-4 py-3 font-mono text-sm">/notifications/configuration/test-fcm</td>
                                <td class="px-4 py-3">Tester connexion FCM</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Deep Linking -->
        <section id="mobile" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-green-100 p-2 rounded-lg"><i class="fas fa-mobile-alt text-green-600"></i></span>
                App Mobile & Deep Linking
            </h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Deep Links SupportÃ©s</h3>
                    <div class="bg-gray-50 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-4 py-3 text-left">Action Type</th>
                                    <th class="px-4 py-3 text-left">Deep Link</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_session</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://planner/session/{id}</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_exam</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://planner/exam/{id}</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_quiz</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://quiz/{id}</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_course</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://courses/{id}</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_achievements</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://profile/achievements</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 font-mono text-sm">open_stats</td>
                                    <td class="px-4 py-3 font-mono text-sm text-blue-600">memobac://profile/statistics</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-gray-700 mb-4">Fichiers ClÃ©s (Flutter)</h3>
                    <div class="space-y-3">
                        <div class="bg-blue-50 rounded-lg p-4">
                            <p class="font-mono text-sm text-blue-800">lib/core/services/notification_service.dart</p>
                            <p class="text-sm text-gray-600 mt-1">Gestion FCM + notifications locales</p>
                        </div>
                        <div class="bg-green-50 rounded-lg p-4">
                            <p class="font-mono text-sm text-green-800">lib/core/services/fcm_token_service.dart</p>
                            <p class="text-sm text-gray-600 mt-1">Enregistrement token FCM</p>
                        </div>
                        <div class="bg-purple-50 rounded-lg p-4">
                            <p class="font-mono text-sm text-purple-800">lib/features/notifications/domain/entities/notification_entity.dart</p>
                            <p class="text-sm text-gray-600 mt-1">ModÃ¨le + enum des types</p>
                        </div>
                        <div class="bg-amber-50 rounded-lg p-4">
                            <p class="font-mono text-sm text-amber-800">lib/features/notifications/presentation/bloc/notifications_bloc.dart</p>
                            <p class="text-sm text-gray-600 mt-1">State management</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Troubleshooting -->
        <section id="troubleshooting" class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                <span class="bg-red-100 p-2 rounded-lg"><i class="fas fa-wrench text-red-600"></i></span>
                DÃ©pannage
            </h2>

            <div class="space-y-6">
                <!-- Problem 1 -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-red-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-exclamation-circle text-red-500"></i>
                        <h3 class="font-semibold text-gray-800">Les notifications ne sont pas envoyÃ©es</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">VÃ©rifiez les points suivants :</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            <li>Le fichier <code>firebase-credentials.json</code> existe dans <code>storage/app/</code></li>
                            <li>La variable <code>FIREBASE_PROJECT_ID</code> est dÃ©finie dans <code>.env</code></li>
                            <li>Le scheduler Laravel est actif (cron configurÃ©)</li>
                            <li>Les queues sont en cours d'exÃ©cution : <code>php artisan queue:work</code></li>
                        </ul>
                        <div class="code-block mt-4">
                            <code>php artisan notifications:process --batch-size=10 -v</code>
                        </div>
                    </div>
                </div>

                <!-- Problem 2 -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-amber-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-exclamation-triangle text-amber-500"></i>
                        <h3 class="font-semibold text-gray-800">Token FCM invalide ou expirÃ©</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">Les tokens FCM peuvent devenir invalides. Le systÃ¨me dÃ©sactive automatiquement les tokens invalides.</p>
                        <p class="text-gray-600 mb-3">Pour nettoyer manuellement :</p>
                        <div class="code-block">
                            <code>// Via Admin: POST /admin/notifications/configuration/clean-tokens</code>
                        </div>
                    </div>
                </div>

                <!-- Problem 3 -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-blue-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-info-circle text-blue-500"></i>
                        <h3 class="font-semibold text-gray-800">Les notifications sont en "pending" mais jamais envoyÃ©es</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">Assurez-vous que la commande de traitement est exÃ©cutÃ©e :</p>
                        <div class="code-block mb-3">
                            <code>php artisan schedule:list</code>
                        </div>
                        <p class="text-gray-600">VÃ©rifiez que <code>notifications.process-scheduled</code> apparaÃ®t dans la liste.</p>
                    </div>
                </div>

                <!-- Problem 4 -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-green-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-check-circle text-green-500"></i>
                        <h3 class="font-semibold text-gray-800">Tester la connexion FCM</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">Utilisez le panel admin pour tester :</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-600">
                            <li>Allez dans <strong>Admin â†’ Notifications â†’ Configuration</strong></li>
                            <li>Cliquez sur <strong>"Tester connexion FCM"</strong></li>
                            <li>Si rÃ©ussi, envoyez une notification test Ã  un utilisateur</li>
                        </ol>
                    </div>
                </div>

                <!-- Problem 5 - Local Notifications -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-teal-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-mobile-alt text-teal-500"></i>
                        <h3 class="font-semibold text-gray-800">Les notifications locales (session reminders) ne s'affichent pas</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">VÃ©rifiez les points suivants sur l'appareil Flutter :</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            <li>Permissions de notification accordÃ©es Ã  l'application</li>
                            <li>La session a le statut <code class="bg-gray-200 px-1 rounded">scheduled</code></li>
                            <li>L'heure de notification n'est pas dans le passÃ©</li>
                            <li>Limite de 64 notifications Android non dÃ©passÃ©e</li>
                        </ul>
                        <div class="code-block mt-4">
<pre><code>// VÃ©rifier les mappings en Flutter (debug)
final mappings = await _notificationIdManager.getAllMappings();
debugPrint('Notifications programmÃ©es: ${mappings.length}');</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Problem 6 - Sync Issues -->
                <div class="border border-gray-200 rounded-xl overflow-hidden">
                    <div class="bg-purple-50 px-6 py-4 flex items-center gap-3">
                        <i class="fas fa-sync text-purple-500"></i>
                        <h3 class="font-semibold text-gray-800">Les notifications locales sont dÃ©synchronisÃ©es avec les sessions</h3>
                    </div>
                    <div class="px-6 py-4">
                        <p class="text-gray-600 mb-3">Utilisez la mÃ©thode de synchronisation :</p>
                        <div class="code-block mb-3">
<pre><code class="language-dart">// Synchroniser les notifications avec les sessions actives
await sessionNotificationService.syncScheduledNotifications(
  activeSessions,  // Liste des sessions actives
  15,              // Rappel 15 min avant
);

// Nettoyer les notifications passÃ©es
await sessionNotificationService.cleanupPastNotifications();</code></pre>
                        </div>
                        <p class="text-gray-600">
                            Cette mÃ©thode annule les notifications orphelines et reprogramme les manquantes.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm">
            <p>Documentation gÃ©nÃ©rÃ©e pour MemoBac - SystÃ¨me de Notifications</p>
            <p class="mt-2">Version 1.0 - DÃ©cembre 2025</p>
        </footer>
    </div>
</body>
</html>
